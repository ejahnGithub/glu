//
// RUN: gluc %s --print-ast | FileCheck -v %s --check-prefix=CHECK-AST
// RUN: gluc %s -o %t && %t | FileCheck -v %s --check-prefix=CHECK-RUN
//

@c_variadic @no_mangling func printf(s: *Char) -> Int;

func main() {
    let a: Char = " ";
    // CHECK-AST: LetDecl {{.*}} <line:18:9>
    // CHECK-AST-NEXT: -->Name: b
    // CHECK-AST: -->Value:
    // CHECK-AST-NEXT: CastExpr {{.*}} <line:18:18>
    // CHECK-AST-NEXT: -->Casting to i32:
    // CHECK-AST-NEXT: -->CastedExpr:
    // CHECK-AST-NEXT: RefExpr {{.*}} <line:18:18>
    // CHECK-AST-NEXT: -->Reference to variable: a
    let b: Int = a; // Implicit conversion from Char to Int
    let c: Float = b as Float; // Explicit conversion from Int to Float

    // CHECK-RUN: Converted: 32.000000
    printf("Converted: %f\n", c);
}
