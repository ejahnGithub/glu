//
// RUN: gluc %s -o %t && %t | FileCheck -v %s
//

@no_mangling @c_variadic func printf(fmt: *Char) -> Int;

func main() -> Int {
    // Test 1: Int to Float
    let i: Int32 = 42;
    let f: Double = i as Double;
    // CHECK: Int to Float: 42.000000
    printf("Int to Float: %f\n", f);

    // Test 2: Float to Int (truncation)
    let ten: Int32 = 10;
    let ften: Double = ten as Double;
    let f2: Double = f / ften;  // 42 / 10 = 4.2
    // CHECK: Float value: 4.200000
    printf("Float value: %f\n", f2);
    let i2: Int32 = f2 as Int32;
    // CHECK: Float to Int: 4
    printf("Float to Int: %d\n", i2);

    // Test 3: Round-trip conversion
    let back: Int32 = f as Int32;
    // CHECK: Round-trip: 42
    printf("Round-trip: %d\n", back);

    // Test 4: Zero
    let zero: Int32 = 0;
    let fzero: Double = zero as Double;
    // CHECK: Zero as float: 0.000000
    printf("Zero as float: %f\n", fzero);
    let izero: Int32 = fzero as Int32;
    // CHECK: Zero as int: 0
    printf("Zero as int: %d\n", izero);

    return 0;
}
