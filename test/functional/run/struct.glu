//
// RUN: gluc -c %s -o %t.o && clang -o %t %t.o && %t | FileCheck -v %s
// XFAIL: *
// default values in structs are not resolved
//

@no_mangling func puts(s: *Char);

struct MyStruct {
    first: *Char = "firstDefault",
    second: *Char = "secondDefault"
}

func testStruct(s: MyStruct) -> Void {
    puts(s.first);
    puts(s.second);
}

func main() -> Int {
    // CHECK: firstDefault
    // CHECK: secondDefault
    let default: MyStruct = {};
    testStruct(default);

    // CHECK: firstInit
    // CHECK: secondDefault
    let init: MyStruct = {"firstInit"};
    testStruct(init);

    // CHECK: secondInit
    // CHECK: thirdInit
    let secondInit: MyStruct = {"secondInit", "thirdInit"};
    testStruct(secondInit);

    return 0;
}
